version: "3"

services:
  backend:
    build:
      context: ./backend/
      dockerfile: ./Dockerfile
    environment:
      - APP_DATABASE_HOST=docker.for.mac.host.internal
      - APP_DATABASE_PORT=27017
      - APP_DATABASE_NAME=test
      - APP_SERVER_PORT=8080

  frontend:
    build:
      context: ./frontend/
      dockerfile: ./Dockerfile
    ports:
      - "8081:8080"

  proxy:
    build:
      context: ./proxy/
      dockerfile: ./Dockerfile
    environment:
      - GRPC_SERVER_HOST=backend
      - GRPC_SERVER_PORT=8080
    links:
      - backend
    ports:
      - "8080:8080"
